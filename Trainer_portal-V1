You are a Principal Software Architect, Python Backend Lead, Vue Frontend Lead, Enterprise DBA, QA Architect, and DevOps Lead.

We are building Trainer Portal Version-1.

IMPORTANT CONTEXT:

- This is part of a single main branch repository.
- Admin Portal already exists in the main branch (React + Node).
- Trainer Portal must be added without breaking Admin Portal.
- Shared PostgreSQL database: employeedb.
- Table "trainer" already exists (created in Admin Version-2).
- We must follow Flyway version discipline.
- Separate teams:
    - Frontend (Vue)
    - Backend (Python)
    - DB Team (Flyway)
    - QA Team
    - DevOps Team
- Currently deploying to Linux VM.
- Future containerization must be supported.
- Must follow real enterprise Dev → QA → UAT → Prod workflow.
- Code must be production-ready.
- No demo-level code allowed.

========================================================
TECH STACK REQUIREMENTS
========================================================

Frontend:
- Vue 3 (Composition API)
- Vite
- Production folder structure
- Reusable components
- Vue Router
- Pinia state management
- Axios API abstraction layer
- Attractive UI animations
- Responsive layout
- Form validation
- Error boundaries
- Environment-based config

Backend:
- Python (FastAPI preferred)
- Clean architecture (Router → Service → Repository)
- SQLAlchemy ORM
- Pydantic validation
- bcrypt password hashing
- JWT support (future ready)
- Centralized error handling
- Structured logging
- Security headers
- CORS configuration
- Rate limiting
- Graceful shutdown

Database:
- PostgreSQL (employeedb)
- Table: trainer
- Flyway versioning
- Version-2 migration ready for future changes

========================================================
FUNCTIONAL REQUIREMENTS
========================================================

LOGIN FLOW:

1) User enters:
    - Email
    - Temporary password (shared by admin)

2) If valid AND is_temporary_password = true:
    → Redirect to "Set New Password" screen
    → Save new password as permanent
    → Update:
        - password_hash
        - is_temporary_password = false
        - updated_at

3) If password mismatch:
    → Show "Wrong credentials"

4) Forgot Password:
    - Enter email
    - Enter new password
    - Update password_hash

========================================================
HEALTH CHECK ENDPOINTS
========================================================

/health
/health/live
/health/ready

Ready endpoint must verify DB connectivity.

========================================================
FLYWAY REQUIREMENTS
========================================================

If trainer table exists:
Create:

V5__add_trainer_password_flags.sql

Include:
- is_temporary_password boolean default true
- updated_at column

Also create:
V6__add_index_on_trainer_email.sql

Provide Flyway folder structure and configuration.

========================================================
TESTING REQUIREMENTS
========================================================

Backend:
- Unit tests (service layer)
- Integration tests (API + DB)
- API tests (pytest + httpx)
- Coverage config

Frontend:
- Component unit tests
- Store tests
- API mock tests

Version-3:
- Add E2E test planning strategy (Cypress)

========================================================
DEPLOYMENT REQUIREMENTS
========================================================

Must provide enterprise documentation:

1) Developer Flow:
    - Feature branch
    - PR review
    - Merge to develop
    - Tagging strategy

2) Dev Environment:
    - Setup virtualenv
    - Install dependencies
    - Run Flyway migration
    - Start FastAPI server
    - Start Vue app

3) QA:
    - Run integration tests
    - API tests
    - Health endpoint verification

4) UAT:
    - Business validation
    - Password reset flow verification

5) Production:
    - Build frontend
    - Package backend
    - SCP to VM
    - Run Flyway migrate
    - Start with Gunicorn
    - Setup Nginx reverse proxy
    - Setup SSL
    - Configure systemd service
    - Verify health endpoints

========================================================
CI/CD REQUIREMENTS
========================================================

Provide:

Backend pipeline YAML:
- Lint
- Unit tests
- Integration tests
- Coverage report
- Build artifact
- Deploy stage

Frontend pipeline YAML:
- Install
- Unit test
- Build
- Deploy

DB pipeline:
- Validate migration
- Flyway migrate
- Rollback strategy

========================================================
MERGE STRATEGY
========================================================

- Admin portal must not break.
- Shared database discipline.
- Use semantic versioning:
    Trainer Portal v1.0.0
- Git branching strategy:
    main
    develop
    feature/*
    release/*

Provide safe merge checklist.

========================================================
CONTAINER READINESS
========================================================

Provide:
- Dockerfile for FastAPI
- Dockerfile for Vue
- docker-compose example
- Env-based configuration
- No hardcoded secrets

========================================================
RESPONSE STRUCTURE REQUIRED
========================================================

1) High-level architecture
2) Folder structure (frontend + backend + db)
3) Flyway scripts
4) Backend production skeleton
5) Frontend production skeleton
6) Sample unit test
7) Sample integration test
8) Sample API test
9) Dev → QA → UAT → Prod documentation
10) CI/CD YAML examples
11) Merge strategy documentation
12) Container readiness plan

IMPORTANT:
Everything must follow enterprise production standards.
System must be ready for VM deployment.
Code must be container-ready.
Do not provide simplified demo examples.
